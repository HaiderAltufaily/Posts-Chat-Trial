{"ast":null,"code":"import { createUserWithEmailAndPassword } from \"@firebase/auth\";\nimport { doc, setDoc } from \"@firebase/firestore\";\nimport { auth, db } from \"../../../firebase/firebase\";\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    const data = req.body;\n    res.status(200).json(data);\n\n    try {\n      const response = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await setDoc(doc(db, \"users\", response.user.uid), {\n        username: data.username,\n        email: response.user.email\n      });\n    } catch (err) {\n      res.status(401).json(err.message);\n    }\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["D:/Udemy/nextjs/06-onwards-to-a-bigger-project-starting-project/pages/api/auth/signup.js"],"names":["createUserWithEmailAndPassword","doc","setDoc","auth","db","handler","req","res","method","data","body","status","json","response","email","password","user","uid","username","err","message"],"mappings":"AAAA,SAASA,8BAAT,QAA+C,gBAA/C;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,qBAA5B;AACA,SAASC,IAAT,EAAeC,EAAf,QAAyB,4BAAzB;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB;AACAH,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,IAArB;;AAEA,QAAI;AACF,YAAMI,QAAQ,GAAG,MAAMb,8BAA8B,CACnDG,IADmD,EAEnDM,IAAI,CAACK,KAF8C,EAGnDL,IAAI,CAACM,QAH8C,CAArD;AAMA,YAAMb,MAAM,CAACD,GAAG,CAACG,EAAD,EAAK,OAAL,EAAcS,QAAQ,CAACG,IAAT,CAAcC,GAA5B,CAAJ,EAAsC;AAChDC,QAAAA,QAAQ,EAAET,IAAI,CAACS,QADiC;AAEhDJ,QAAAA,KAAK,EAAED,QAAQ,CAACG,IAAT,CAAcF;AAF2B,OAAtC,CAAZ;AAID,KAXD,CAWE,OAAOK,GAAP,EAAY;AACZZ,MAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBO,GAAG,CAACC,OAAzB;AACD;AACF;AACF;;AACD,eAAef,OAAf","sourcesContent":["import { createUserWithEmailAndPassword } from \"@firebase/auth\";\r\nimport { doc, setDoc } from \"@firebase/firestore\";\r\nimport { auth, db } from \"../../../firebase/firebase\";\r\n\r\nasync function handler(req, res) {\r\n  if (req.method === \"POST\") {\r\n    const data = req.body;\r\n    res.status(200).json(data);\r\n\r\n    try {\r\n      const response = await createUserWithEmailAndPassword(\r\n        auth,\r\n        data.email,\r\n        data.password\r\n      );\r\n\r\n      await setDoc(doc(db, \"users\", response.user.uid), {\r\n        username: data.username,\r\n        email: response.user.email,\r\n      });\r\n    } catch (err) {\r\n      res.status(401).json(err.message);\r\n    }\r\n  }\r\n}\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}