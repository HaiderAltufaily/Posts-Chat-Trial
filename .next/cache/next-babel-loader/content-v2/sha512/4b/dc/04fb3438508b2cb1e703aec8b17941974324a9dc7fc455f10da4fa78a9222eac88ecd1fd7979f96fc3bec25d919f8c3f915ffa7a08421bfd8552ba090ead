{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Udemy\\\\nextjs\\\\06-onwards-to-a-bigger-project-starting-project\\\\components\\\\meetups\\\\Reply.js\";\nimport { Box, Flex, Text, IconButton } from \"@chakra-ui/react\";\nimport axios from \"axios\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { AiFillEdit } from \"react-icons/ai\";\nimport { CloseIcon } from \"@chakra-ui/icons\";\nimport { auth, db } from \"../../firebase/firebase\";\nimport { addDoc, collection, doc, getDoc, getDocs, query, where } from \"@firebase/firestore\";\nimport classes from \"./NewMeetupForm.module.css\";\n\nfunction Reply({\n  reply\n}) {\n  var _auth$currentUser;\n\n  const {\n    0: user,\n    1: setUser\n  } = useState({});\n  const {\n    0: editValue,\n    1: setEditValue\n  } = useState(reply.content);\n  const {\n    0: edit,\n    1: setEdit\n  } = useState(false);\n  useEffect(() => {\n    let isMounted = true;\n\n    async function getUser() {\n      const x = await fetch(`/api/${reply.user}`);\n      const response = await x.json();\n      if (isMounted) setUser(response);\n    }\n\n    getUser();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  async function handleDelete() {\n    await axios.delete(`/api/replies/${reply.id}/${reply.postId}`).then(d => console.log(\"aaa\", d.data)).catch(err => console.log(err)); // const q = query(\n    //   collection(db, \"posts\"),\n    //   where(\"replies\", \"array-contains\", reply)\n    // );\n    // const d = await getDocs(q);\n    // const data = await d.docs.map((doc) => doc.data());\n    // console.log(\"aa\", data);\n    // const d = (\n    //   await getDoc(\n    //     doc(db, \"message/SjVjF3dU5YoDKIAqTPYD/replies/q55nIyHOZUBUp089RUKM\")\n    //   )\n    // ).data();\n    // console.log(d);\n    // await addDoc(collection(db, `posts/${reply.postId}/reply`), reply);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    my: \"3\",\n    bg: \"gray.200\",\n    py: \"3\",\n    children: [((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.uid) === reply.user && /*#__PURE__*/_jsxDEV(Flex, {\n      justify: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => setEdit(true),\n        textAlign: \"left\",\n        icon: /*#__PURE__*/_jsxDEV(AiFillEdit, {\n          size: \"23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleDelete,\n        icon: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), edit || /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        children: [\" \", user.username, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        fontWeight: \"semibold\",\n        fontSize: \"23\",\n        children: [\" \", reply.content, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), edit && /*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.form,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          children: \"Post Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            fontSize: \"23\"\n          },\n          value: editValue,\n          type: \"text\",\n          required: true,\n          id: \"title\",\n          onChange: e => setEditValue(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Submit Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\nexport default Reply;","map":{"version":3,"sources":["D:/Udemy/nextjs/06-onwards-to-a-bigger-project-starting-project/components/meetups/Reply.js"],"names":["Box","Flex","Text","IconButton","axios","React","useEffect","useRef","useState","AiFillEdit","CloseIcon","auth","db","addDoc","collection","doc","getDoc","getDocs","query","where","classes","Reply","reply","user","setUser","editValue","setEditValue","content","edit","setEdit","isMounted","getUser","x","fetch","response","json","handleDelete","delete","id","postId","then","d","console","log","data","catch","err","currentUser","uid","username","form","control","fontSize","e","target","value","actions"],"mappings":"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","sourcesContent":["import { Box, Flex, Text, IconButton } from \"@chakra-ui/react\";\r\nimport axios from \"axios\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { AiFillEdit } from \"react-icons/ai\";\r\nimport { CloseIcon } from \"@chakra-ui/icons\";\r\nimport { auth, db } from \"../../firebase/firebase\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n} from \"@firebase/firestore\";\r\nimport classes from \"./NewMeetupForm.module.css\";\r\nfunction Reply({ reply }) {\r\n  const [user, setUser] = useState({});\r\n  const [editValue, setEditValue] = useState(reply.content);\r\n  const [edit, setEdit] = useState(false);\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    async function getUser() {\r\n      const x = await fetch(`/api/${reply.user}`);\r\n      const response = await x.json();\r\n      if (isMounted) setUser(response);\r\n    }\r\n    getUser();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  async function handleDelete() {\r\n    await axios\r\n      .delete(`/api/replies/${reply.id}/${reply.postId}`)\r\n      .then((d) => console.log(\"aaa\", d.data))\r\n      .catch((err) => console.log(err));\r\n    // const q = query(\r\n    //   collection(db, \"posts\"),\r\n    //   where(\"replies\", \"array-contains\", reply)\r\n    // );\r\n    // const d = await getDocs(q);\r\n    // const data = await d.docs.map((doc) => doc.data());\r\n    // console.log(\"aa\", data);\r\n\r\n    // const d = (\r\n    //   await getDoc(\r\n    //     doc(db, \"message/SjVjF3dU5YoDKIAqTPYD/replies/q55nIyHOZUBUp089RUKM\")\r\n    //   )\r\n    // ).data();\r\n    // console.log(d);\r\n    // await addDoc(collection(db, `posts/${reply.postId}/reply`), reply);\r\n  }\r\n  return (\r\n    <Box my=\"3\" bg=\"gray.200\" py=\"3\">\r\n      {auth.currentUser?.uid === reply.user && (\r\n        <Flex justify=\"space-between\">\r\n          <IconButton\r\n            onClick={() => setEdit(true)}\r\n            textAlign=\"left\"\r\n            icon={<AiFillEdit size=\"23\" />}\r\n          />\r\n\r\n          <IconButton onClick={handleDelete} icon={<CloseIcon />} />\r\n        </Flex>\r\n      )}\r\n      {edit || (\r\n        <div>\r\n          <Text> {user.username} </Text>\r\n          <Text fontWeight=\"semibold\" fontSize=\"23\">\r\n            {\" \"}\r\n            {reply.content}{\" \"}\r\n          </Text>\r\n        </div>\r\n      )}\r\n      {edit && (\r\n        <form className={classes.form}>\r\n          <div className={classes.control}>\r\n            <label htmlFor=\"title\">Post Title</label>\r\n            <input\r\n              style={{ fontSize: \"23\" }}\r\n              value={editValue}\r\n              type=\"text\"\r\n              required\r\n              id=\"title\"\r\n              onChange={(e) => setEditValue(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className={classes.actions}>\r\n            <button>Submit Changes</button>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Reply;\r\n"]},"metadata":{},"sourceType":"module"}